<!-- Â© 2022 Bongsub Song <doorebong@gmail.com> -->
<!-- All right reserved -->
<!-- Description : BRM snake robot Mujoco simulation xml and axis alligned version. -->
<!-- v20220830 : Circular frame version -->
<!-- v20221103 : Body Frame Alligned -->
<!-- v20240122 : mesh contact is convert to default shape -->

<mujoco model="horcrux">

    <option timestep="0.01" iterations="100" tolerance="1e-8" solver="CG" cone="elliptic"/>

    <asset>
        <texture name="texplane" type="2d" builtin="checker" rgb1=".8 .8 .8" rgb2=".1 0.15 0.2" width="512" height="512" mark="cross" markrgb=".8 .8 .8"/>  

        <texture name="texgeom" type="cube" builtin="flat" mark="cross" width="127" height="1278" 
            rgb1="0.8 0.6 0.4" rgb2="0.8 0.6 0.4" markrgb="1 1 1" random="0.01"/>  

        <material name="matplane" reflectance="0.3" texture="texplane" texrepeat="2 2" texuniform="true"/>

        <material name="matgeom" texture="texgeom" texuniform="true" rgba="0.8 0.6 .4 1"/>

        <hfield name="terrain" ncol="201" nrow="201" size="30 30 5 .1"/>

        <mesh name="head_link" file="./asset/Head.stl"/>
        <mesh name="v_link" file="./asset/Link2.stl"/>
        <mesh name="h_link" file="./asset/Link3.stl"/>
        <mesh name="tail_link" file="./asset/Tail.stl"/>
    </asset>

    <default>
        <!-- <default class="link_defaults">
            <body pos="-0.678 0 0" euler="0 0 0"/>
        </default> -->
        <default class="joint_defaults">
            <joint type="hinge" pos="0.0388 0 0" limited="true" range="-75 75" damping="0.35" actuatorfrcrange="-3.5 3.5" armature="0.001" />
        </default>
        <default class="C-frame">
            <geom type="cylinder" mass="0.05" condim="6" size="0.0318 0.01" rgba="0.5 0.5 0.5 0.1" friction="0.5 0.15 0.015" pos="0 0 0" euler="0 90 0"/>
        </default>
        <default class="H-link">
            <geom type="box" mass="0.01" condim="6" size="0.01425 0.017 0.02325" rgba="0.5 0.5 0.5 0.1" friction="0.5 0.15 0.015" pos="-0.017 0 0" euler="0 90 0"/>
        </default>
        <default class="V-link">
            <geom type="box" mass="0.01" condim="6" size="0.01425 0.017 0.02325" rgba="0.5 0.5 0.5 0.1" friction="0.5 0.15 0.015" pos="-0.017 0 0" euler="90 90 0"/>
        </default>
        <default class="Mesh-head">
            <geom type="mesh" mesh="head_link" mass="0" pos="-0.029 0 0" euler="180 0 0" contype="0" conaffinity="0" group="2" rgba="0.7 0.4 0.4 1"/>
        </default>
        <default class="Mesh-H-link">
            <geom type="mesh" mesh="h_link" mass="0" pos="-0.029 0 0" euler="180 0 0" contype="0" conaffinity="0" group="2" rgba="0.7 0.4 0.4 1"/>
        </default>
        <default class="Mesh-V-link">
            <geom type="mesh" mesh="v_link" mass="0" pos="-0.029 0 0" euler="0 0 0" contype="0" conaffinity="0" group="2" rgba="0.4 0.4 0.7 1"/>
        </default>
        <default class="Mesh-tail">
            <geom type="mesh" mesh="tail_link" mass="0" pos="0.001875 0 0" euler="0 0 0" contype="0" conaffinity="0" group="2" rgba="0.7 0.4 0.4 1"/>
        </default>
    </default>

    <worldbody>
        <geom name="floor" pos="0 0 0" size="0 0 .25" type="plane" material="matplane" condim="6" friction="0.5 0.1 0.01"/>

        <light directional="false" diffuse="1 1 1" specular="0 0 0" pos="0 0 15" dir="0 0 -1" castshadow="false"/>

        <body name="head" pos="0 0 0" euler="0 0 0"> 
            <site name="s_head" pos="0 0 0" euler="0 0 0"/>
            <freejoint name="root"/>
            <geom class="Mesh-head"/>    
            <geom class="C-frame"/>
            <geom class="H-link"/>
            <body name="link1" pos="-0.0678 0 0" euler="0 0 0">
                <joint class="joint_defaults" name="joint1" axis="0 1 0"/>
                <geom class="Mesh-V-link"/> 
                <geom class="C-frame"/>
                <geom class="V-link"/>
                <body name="link2" pos="-0.0678 0 0" euler="0 0 0">
                    <joint class="joint_defaults" name="joint2" axis="0 0 1"/>
                    <geom class="Mesh-H-link"/> 
                    <geom class="C-frame"/>
                    <geom class="H-link"/>
                    <body name="link3" pos="-0.0678 0 0" euler="0 0 0">
                        <joint class="joint_defaults" name="joint3" axis="0 1 0"/>
                        <geom class="Mesh-V-link"/> 
                        <geom class="C-frame"/>
                        <geom class="V-link"/>
                        <body name="link4" pos="-0.0678 0 0" euler="0 0 0">
                            <joint class="joint_defaults" name="joint4" axis="0 0 1"/>
                            <geom class="Mesh-H-link"/> 
                            <geom class="C-frame"/>
                            <geom class="H-link"/>
                            <body name="link5" pos="-0.0678 0 0" euler="0 0 0">
                                <joint class="joint_defaults" name="joint5" axis="0 1 0"/>
                                <geom class="Mesh-V-link"/> 
                                <geom class="C-frame"/>
                                <geom class="V-link"/>
                                <body name="link6" pos="-0.0678 0 0" euler="0 0 0">
                                    <joint class="joint_defaults" name="joint6" axis="0 0 1"/>
                                    <geom class="Mesh-H-link"/> 
                                    <geom class="C-frame"/>
                                    <geom class="H-link"/>
                                    <body name="link7" pos="-0.0678 0 0" euler="0 0 0">
                                        <joint class="joint_defaults" name="joint7" axis="0 1 0"/>
                                        <geom class="Mesh-V-link"/> 
                                        <geom class="C-frame"/>
                                        <geom class="V-link"/>
                                        <body name="link8" pos="-0.0678 0 0" euler="0 0 0">
                                            <joint class="joint_defaults" name="joint8" axis="0 0 1"/>
                                            <geom class="Mesh-H-link"/> 
                                            <geom class="C-frame"/>
                                            <geom class="H-link"/>
                                            <body name="link9" pos="-0.0678 0 0" euler="0 0 0">
                                                <joint class="joint_defaults" name="joint9" axis="0 1 0"/>
                                                <geom class="Mesh-V-link"/> 
                                                <geom class="C-frame"/>
                                                <geom class="V-link"/>
                                                <body name="link10" pos="-0.0678 0 0" euler="0 0 0">
                                                    <joint class="joint_defaults" name="joint10" axis="0 0 1"/>
                                                    <geom class="Mesh-H-link"/> 
                                                    <geom class="C-frame"/>
                                                    <geom class="H-link"/>
                                                    <body name="link11" pos="-0.0678 0 0" euler="0 0 0">
                                                        <joint class="joint_defaults" name="joint11" axis="0 1 0"/>
                                                        <geom class="Mesh-V-link"/> 
                                                        <geom class="C-frame"/>
                                                        <geom class="V-link"/>
                                                        <body name="link12" pos="-0.0678 0 0" euler="0 0 0">
                                                            <joint class="joint_defaults" name="joint12" axis="0 0 1"/>
                                                            <geom class="Mesh-H-link"/> 
                                                            <geom class="C-frame"/>
                                                            <geom class="H-link"/>
                                                            <body name="link13" pos="-0.0678 0 0" euler="0 0 0">
                                                                <joint class="joint_defaults" name="joint13" axis="0 1 0"/>
                                                                <geom class="Mesh-V-link"/> 
                                                                <geom class="C-frame"/>
                                                                <geom class="V-link"/>
                                                                <body name="tail" pos="-0.0678 0 0" euler="0 0 0">
                                                                    <joint class="joint_defaults" name="joint14" axis="0 0 1"/>
                                                                    <geom class="Mesh-tail"/> 
                                                                    <geom class="C-frame"/>
                                                                </body>
                                                            </body>
                                                        </body>
                                                    </body>
                                                </body>
                                            </body>
                                        </body>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
    </worldbody>

    <!-- Motor -->
    <!-- <actuator>
        <motor name="servo_1"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint1"/>
        <motor name="servo_2"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint2"/>
        <motor name="servo_3"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint3"/>
        <motor name="servo_4"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint4"/>
        <motor name="servo_5"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint5"/>
        <motor name="servo_6"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint6"/>
        <motor name="servo_7"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint7"/>
        <motor name="servo_8"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint8"/>
        <motor name="servo_9"  ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint9"/>
        <motor name="servo_10" ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint10"/>
        <motor name="servo_11" ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint11"/>
        <motor name="servo_12" ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint12"/>
        <motor name="servo_13" ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint13"/>
        <motor name="servo_14" ctrllimited="true" ctrlrange="-3.0 3.0" gear="1" joint="joint14"/>
    </actuator> -->

    <!-- Servo -->
    <actuator>
        <position name="servo_1"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint1"  kp="1.9"/>
        <position name="servo_2"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint2"  kp="1.9"/>
        <position name="servo_3"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint3"  kp="1.9"/>
        <position name="servo_4"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint4"  kp="1.9"/>
        <position name="servo_5"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint5"  kp="1.9"/>
        <position name="servo_6"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint6"  kp="1.9"/>
        <position name="servo_7"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint7"  kp="1.9"/>
        <position name="servo_8"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint8"  kp="1.9"/>
        <position name="servo_9"  ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint9"  kp="1.9"/>
        <position name="servo_10" ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint10" kp="1.9"/>
        <position name="servo_11" ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint11" kp="1.9"/>
        <position name="servo_12" ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint12" kp="1.9"/>
        <position name="servo_13" ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint13" kp="1.9"/>
        <position name="servo_14" ctrllimited="true" ctrlrange="-1.4 1.4" forcelimited="true" forcerange="-3.5 3.5" joint="joint14" kp="1.9"/>
    </actuator>

</mujoco>
